import { LyraConsole } from "@/core/console/LyraConsole"

import { MigrationGeneratorHelper } from "../utils"
import {TmpManager} from "@/core/loader"


export class GenerateMigrationCommand {
  async execute() {
    await TmpManager.refreshTmpEntities()
    const migrator = new MigrationGeneratorHelper()
    const queries = await migrator.buildCreateTableQueries()

    LyraConsole.info(queries.toString(), "")

    migrator.generateMigrationFile(queries)

    LyraConsole.success("Migration created", "")
  }
}
